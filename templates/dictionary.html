{% extends "base.html" %}

{% block title %}Dictionary{% endblock %}

{% block content %}
    <div class="container mt-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <!-- Flash messages -->
            {% for category, message in messages %}
                <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
        <div class="row">
            <div class="col-md-6">
                <div class="info-box mt-3 mx-auto">
                    <p class="info-text">Use our dictionary to look up the meaning of words. The answers are generated by AI and added to the database for faster lookups next time.</p>
                    <p class="info-text">When added, favorite words will be available in your dashboard under the "Favorite words" tab.</p>
                </div>  
                <h1>Dictionary</h1>
                <form method="post" action="{{ url_for('dictionary') }}">
                    <div class="form-group">
                        <label for="word_to_lookup">Enter a word:</label>
                        <input type="text" class="form-control" id="word_to_lookup" name="word_to_lookup" placeholder="Type a word..." required>
                    </div>
                    <button type="submit" class="btn btn-primary">Lookup</button>
                </form>
                <style>
    .info-box {
        background-color: rgb(229, 179, 230);
        border-radius: 10px;
        padding: 10px;
        text-align: center;
    }

    .info-text {
        font-size: 16px;
        margin: 0;
    }

    .meaning-box {
        margin-bottom: 0.5cm;
        background-color: #f5f5f5; /* Light gray background */
        border: 1px solid #d5d5d5; /* Light border */
        border-radius: 10px; /* Rounded corners */
        padding: 10px; /* Spacing inside the box */
        overflow: hidden; /* Hide overflowing content */
    }

    .smaller-image {
        max-width: 400px;
    }

    .meaning-text {
        font-size: 14px; /* Smaller text size */
        overflow: hidden; /* Hide overflowing content */
        word-wrap: break-word; /* Wrap long words */
    }

    .add-to-favorites-btn {
        background-color: #f17f7f; /* Light red background */
        color: #fff; /* White text color */
        border: none;
        border-radius: 5px; /* Rounded corners */
        padding: 5px 10px; /* Adjust padding as needed */
    }

    .add-to-favorites-btn:hover {
        background-color: #ffc1c1; /* Light red background on hover */
    }
</style>

                {% if meaning %}
                <div class="mt-3 meaning-box">
                    <h3>Meaning:</h3>
                    <div class="meaning-text">
                        {% for defi in meaning.split('\n') %}
                            <p>{{ defi|safe }}</p>
                        {% endfor %}
                    </div>
                    <div>
                        <form method="post" action="{{ url_for('add_to_favorites') }}">
                            <input type="hidden" name="word_to_lookup" value="{{ word_to_lookup }}">
                            <input type="hidden" name="meaning" value="{{ meaning }}">
                            <button type="submit" class="add-to-favorites-btn">Add to Favorites</button>
                        </form>
                    </div>
                </div>
                {% endif %}
            </div>
            <div class="col-md-6 text-center">
                <img src="/static/dict.jpg" alt="Your Image" class="img-fluid smaller-image">
            </div>
        </div>
    </div>
{% endblock %}
